<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Get PI</title>
</head>
<body>
	<div id='log'><p>Push Button</p></div>
	<label for='deg'>DEG</label>
	<input type='text' id='deg' value='60' />
	<button id='get'>Get PI</button>
	<canvas id='circle' width='300' height='300'></canvas>
	<script type='text/javascript'>
		get.addEventListener('click', _=> {
			const v = Number(deg.value);
			l.log(getPI(v));
			c.drawCircle(v);
		});
		
		class Log {
			constructor(name, limit) {
				this.$el = document.getElementById(name);
				this._limit = limit;
			}
			send(str, callback, s = this) {
				
				const line = document.createElement('p');
				line.innerText = str;
				if (callback) callback(line);
				if (s.$el.children.length >= s._limit) s.$el.removeChild(s.$el.firstChild);
				s.$el.appendChild(line);
			}
			setLineStyle(el, color, border, background) {
				el.style['color'] = color;
				el.style['border-bottom'] = `${ border } 1px solid`;
				el.style['background-color'] = background;
				el.style['margin'] = '0';
			}
			log(str, s = this) {
				s.send(str, line => s.setLineStyle(line, '#c61816', '#f0f0f0', 'white'));
			}
			warn(str, s = this) {
				s.send(str, line => s.setLineStyle(line, '#5c3b00', '#fff5c2', '#fffbe6'));
			}
			error(str, s = this) {
				s.send(str, line => s.setLineStyle(line, '#ff0000', '#ffd7d7', '#fff0f0'));
			}
		}
		
		function getPI(deg) {
			//-- Archimedes Style
			console.log('Number.isNaN(deg)', Number.isNaN(deg));
			if (360 % deg || Number.isNaN(deg)) {
				l.error(`Can't divided!`);
				throw Error(`Can't divided!`);
			}
			const DEG = Math.PI / 180 * deg / 2,
						insideValue = Math.sin(DEG) * 2,
						outsideValue = Math.tan(DEG) * 2;

			return `${ insideValue * (360 / deg) / 2 } < PI < ${ outsideValue * (360 / deg) / 2 }`;
		}
		
		class CanvasForCircle {
			constructor(name, r) {
				this.$el = document.getElementById(name);
				this.$ctx = this.$el.getContext('2d');
				this.r = r;
				this.w = this.$el.width;
				this.h = this.$el.height;
				this.xCenter = this.w / 2,
				this.yCenter = this.h / 2;
			}
			
			async draw(deg, s = this) {
				if (360 % deg) return Error(`Can't divided!`);
				s.$ctx.clearRect(0, 0, s.w, s.h);
				const DEG = Math.PI / 180 * deg;
				s.$ctx.beginPath();
				s.$ctx.moveTo(s.xCenter + s.r, s.yCenter);
				for (let i = 0; i < 360 / deg; i++) {
					s.$ctx.lineTo(s.xCenter + Math.cos(DEG * (i + 1)) * s.r, s.yCenter + Math.sin(DEG * (i + 1)) * s.r);
					await new Promise(r => setTimeout(r, 1));
				}
				s.$ctx.closePath();
				s.$ctx.fill();
			}
			
			drawCircle(deg, s = this) {
				return s.draw(deg);
			}
		}
		
		const l = new Log('log', 1);
		const c = new CanvasForCircle('circle', 100);
	</script>
</body>
</html>